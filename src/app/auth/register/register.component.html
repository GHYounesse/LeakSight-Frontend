<div class="loading-overlay active" *ngIf="isLoading" id="loadingOverlay">
      <!-- <div class="overlay-spinner"></div> -->
       <div class="spinner-bars">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
    </div>
<div class="container" id="registerContainer">
  <div class="login-container">
    <div class="text-center mb-4">
      <i class="fas fa-user-plus text-info" style="font-size: 3rem"></i>
      <h2 class="text-info mt-3">LeakSight</h2>
      <p class="text-muted">Create Your Threat Intelligence Account</p>
    </div>

    <!-- Error Alert -->
    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>{{ errorMessage }}
    </div>

    <!-- Success Alert -->
    <div *ngIf="successMessage" class="alert alert-success" role="alert">
      <i class="fas fa-check-circle me-2"></i>{{ successMessage }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="username" class="form-label text-light">Username</label>
        <input
          type="text"
          class="form-control"
          id="username"
          formControlName="username"
          placeholder="Enter your first name"
          [class.is-invalid]="
            registerForm.get('username')?.invalid &&
            registerForm.get('username')?.touched
          "
        />
        <div
          *ngIf="
            registerForm.get('username')?.invalid &&
            registerForm.get('username')?.touched
          "
          class="invalid-feedback"
        >
          <small *ngIf="registerForm.get('username')?.errors?.['required']"
            >First name is required</small
          >
          <small *ngIf="registerForm.get('username')?.errors?.['minlength']"
            >First name must be at least 2 characters</small
          >
        </div>
      </div>

      <!-- <div class="mb-3">
        <label for="full_name" class="form-label text-light">Last Name</label>
        <input
          type="text"
          class="form-control"
          id="full_name"
          formControlName="full_name"
          placeholder="Enter your last name"
          [class.is-invalid]="
            registerForm.get('full_name')?.invalid &&
            registerForm.get('full_name')?.touched
          "
        />
        <div
          *ngIf="
            registerForm.get('full_name')?.invalid &&
            registerForm.get('full_name')?.touched
          "
          class="invalid-feedback"
        >
          <small *ngIf="registerForm.get('full_name')?.errors?.['required']"
            >Last name is required</small
          >
          <small *ngIf="registerForm.get('full_name')?.errors?.['minlength']"
            >Last name must be at least 2 characters</small
          >
        </div>
      </div> -->

      <div class="mb-3">
        <label for="email" class="form-label text-light">Email Address</label>
        <input
          type="email"
          class="form-control"
          id="email"
          formControlName="email"
          placeholder="Enter your email"
          [class.is-invalid]="
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
          "
        />
        <div
          *ngIf="
            registerForm.get('email')?.invalid &&
            registerForm.get('email')?.touched
          "
          class="invalid-feedback"
        >
          <small *ngIf="registerForm.get('email')?.errors?.['required']"
            >Email is required</small
          >
          <small *ngIf="registerForm.get('email')?.errors?.['email']"
            >Please enter a valid email</small
          >
        </div>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label text-light">Password</label>
        <input
          type="password"
          class="form-control"
          id="password"
          formControlName="password"
          placeholder="Create a password"
          [class.is-invalid]="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
        />
        <div
          *ngIf="
            registerForm.get('password')?.invalid &&
            registerForm.get('password')?.touched
          "
          class="invalid-feedback"
        >
          <small *ngIf="registerForm.get('password')?.errors?.['required']"
            >Password is required</small
          >
          <small *ngIf="registerForm.get('password')?.errors?.['minlength']"
            >Password must be at least 8 characters</small
          >
          <small *ngIf="registerForm.get('password')?.errors?.['pattern']"
            >Password must contain at least one uppercase letter, one lowercase
            letter, and one number</small
          >
        </div>
      </div>

      <div class="mb-3">
        <label for="confirmPassword" class="form-label text-light"
          >Confirm Password</label
        >
        <input
          type="password"
          class="form-control"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Confirm your password"
          [class.is-invalid]="
            registerForm.get('confirmPassword')?.invalid &&
            registerForm.get('confirmPassword')?.touched
          "
        />
        <div
          *ngIf="
            registerForm.get('confirmPassword')?.invalid &&
            registerForm.get('confirmPassword')?.touched
          "
          class="invalid-feedback"
        >
          <small
            *ngIf="registerForm.get('confirmPassword')?.errors?.['required']"
            >Please confirm your password</small
          >
          <small
            *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']"
            >Passwords do not match</small
          >
        </div>
      </div>



      <button
        type="submit"
        class="btn btn-primary w-100"
        [disabled]="registerForm.invalid || isLoading"
      >
        <span
          *ngIf="isLoading"
          class="spinner-border spinner-border-sm me-2"
          role="status"
        ></span>
        <i *ngIf="!isLoading" class="fas fa-user-plus me-2"></i>
        {{ isLoading ? "Creating Account..." : "Create Account" }}
      </button>
    </form>

    <div class="text-center mt-3">
      <p class="text-muted">
        Already have an account?
        <a role="button" class="text-primary" (click)="goToLogin()">Login here</a>
      </p>
    </div>
  </div>
</div>
